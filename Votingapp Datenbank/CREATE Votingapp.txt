DROP DATABASE IF EXISTS votingapp;

CREATE DATABASE IF NOT EXISTS votingapp;
USE votingapp;

CREATE TABLE Kategorie(
Bezeichnung VARCHAR(255) NOT NULL,
KEY(Bezeichnung)
);

INSERT INTO Kategorie (Bezeichnung) VALUES ('gut bürgerlich');
INSERT INTO Kategorie (Bezeichnung) VALUES ('asiatisch');
INSERT INTO Kategorie (Bezeichnung) VALUES ('italienisch');
INSERT INTO Kategorie (Bezeichnung) VALUES ('griechisch');
INSERT INTO Kategorie (Bezeichnung) VALUES ('fast food');

CREATE TABLE Person(
PID VARCHAR(255) PRIMARY KEY NOT NULL,
Email TEXT NOT NULL,
Klasse ENUM('1HW','2HW','3HW','4HW','5HW'),
Passwort TEXT NOT NULL,
Rolle ENUM('m','u') NOT NULL DEFAULT 'U',
KEY(PID)
);

CREATE TABLE Freund(
PID VARCHAR(255) NOT NULL,
FID VARCHAR(255) PRIMARY KEY NOT NULL,
FOREIGN KEY(PID) REFERENCES Person(PID)
);

CREATE TABLE Restaurant(
RID VARCHAR(255) PRIMARY KEY NOT NULL,
Kategorie TEXT NOT NULL,
Adresse TEXT NOT NULL,
KEY(RID)
);

CREATE TABLE Bewertung(
PID VARCHAR(255) NOT NULL,
RID VARCHAR(255) NOT NULL,
Sterne INT NOT NULL,
Beschreibung Text NOT NULL,
FOREIGN KEY(PID) REFERENCES Person(PID),
FOREIGN KEY(RID) REFERENCES Restaurant(RID)
);

CREATE TABLE Voting(
PID VARCHAR(255) NOT NULL,
RID VARCHAR(255) NOT NULL,
FOREIGN KEY(PID) REFERENCES Person(PID),
FOREIGN KEY(RID) REFERENCES Restaurant(RID)
);
