CREATE DATABASE IF NOT EXISTS Votingapp;

CREATE TABLE Person(
PID INT PRIMARY KEY NOT NULL,
Benutzername TEXT NOT NULL,
Klasse TEXT NOT NULL,
Passwort TEXT NOT NULL,
Rolle CHAR NOT NULL DEFAULT ('U'),
FOREIGN KEY (Rolle) REFERNECES Rolle (Rolle)
);

CREATE TABLE Freund(
PID INT NOT NULL,
FID INT PRIMARY KEY NOT NULL,
FOREIGN KEY(PID) REFERENCES Person(PID)
);

CREATE TABLE Bewertung(
PID INT NOT NULL,
RID INT NOT NULL,
Sterne REAL NOT NULL,
Beschreibung Text NOT NULL,
FOREIGN KEY(PID) REFERENCES Person(PID),
FOREIGN KEY(RID) REFERENCES Restaurant(RID)
);

CREATE TABLE Restaurant(
RID INT PRIMARY KEY NOT NULL,
KID INT NOT NULL, 
Name TEXT NOT NULL,
Kategorie TEXT NOT NULL,
FOREIGN KEY (KID) REFERENCES Kategorie (KID)
);

CREATE TABLE Freund(
PID INT NOT NULL,
FID INT PRIMARY KEY NOT NULL,
FOREIGN KEY(PID) REFERNECES Person(PID)
);

CREATE TABLE Klasse(
Name TEXT NOT NULL
);

CREATE TABLE Voting(
PID INT NOT NULL,
RID Integer NOT NULL,
FOREIGN KEY(PID) REFERENCES Person(PID)
);

CREATE TABLE Adresse(
RID INT NOT NULL,
Postleitzahl TEXT NOT NULL,
Straﬂe TEXT NOT NULL,
Ort TEXT NOT NULL,
FOREIGN KEY (PID) REFERENCES Person (PID)
);

CREATE TABLE Rolle(
Rolle CHAR NOT NULL DEFAULT ('U'),
);

INSERT INTO ROLLE (Rolle) VALUES ('U');
INSERT INTO ROLLE (Rolle) VALUES ('M');

CREATE TABLE Kategorie(
KID INT PRIMARY KEY NOT NULL,
Bezeichnung TEXT NOT NULL
);




